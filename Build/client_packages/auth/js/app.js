(function(t){function e(e){for(var a,i,c=e[0],s=e[1],u=e[2],d=0,p=[];d<c.length;d++)i=c[d],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&p.push(o[i][0]),o[i]=0;for(a in s)Object.prototype.hasOwnProperty.call(s,a)&&(t[a]=s[a]);l&&l(e);while(p.length)p.shift()();return r.push.apply(r,u||[]),n()}function n(){for(var t,e=0;e<r.length;e++){for(var n=r[e],a=!0,c=1;c<n.length;c++){var s=n[c];0!==o[s]&&(a=!1)}a&&(r.splice(e--,1),t=i(i.s=n[0]))}return t}var a={},o={app:0},r=[];function i(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=a,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)i.d(n,a,function(e){return t[e]}.bind(null,a));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],s=c.push.bind(c);c.push=e,c=c.slice();for(var u=0;u<c.length;u++)e(c[u]);var l=s;r.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"21ce":function(t,e,n){},"3a2c":function(t,e,n){"use strict";n("21ce")},4360:function(t,e,n){"use strict";(function(t){var a=n("1da1"),o=(n("96cf"),n("d3b7"),n("25f0"),n("e9c4"),n("5502")),r=n("505c"),i=n("9adc"),c=n("8361");e["a"]=Object(o["a"])({namespaced:!0,state:{page:r["a"].registration,login:"",email:"",emailConfirmCode:"",appKey:"",refreshToken:null,accessToken:null,badSocialId:!1},mutations:{setPage:function(t,e){t.page=t.badSocialId?r["a"].badSocial:e},setAppKey:function(t,e){t.appKey=e},setTokens:function(t,e){t.refreshToken=e.RefreshToken,t.accessToken=e.AccessToken},updateUserData:function(t){t.login=t.refreshToken.Login||"",t.email=t.refreshToken.Email||""},setWrongSocial:function(t){t.badSocialId=!0}},actions:{setPage:function(t,e){var n=t.commit;n("setPage",e)},setAppKey:function(t,e){var n=t.commit;n("setAppKey",e)},setWrongSocial:function(t){var e=t.commit;e("setPage",r["a"].badSocial),e("setWrongSocial")},setToken:function(e,n){return Object(a["a"])(regeneratorRuntime.mark((function a(){var o,c,s,u,l;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(o=e.state,c=e.commit,a.prev=1,s=t.from(n,"base64").toString("UTF-8"),u=JSON.parse(s),c("setTokens",u),o.appKey===o.accessToken.AppKey){a.next=8;break}return c("setPage",r["a"].authorization),a.abrupt("return");case 8:return c("updateUserData"),a.next=11,Object(i["a"])("auth:player:token:check",t.from(JSON.stringify(o.accessToken)).toString("base64"));case 11:l=a.sent,"ok"==l?c("setPage",r["a"].Loading):(window.mp.trigger("cef:auth:token:reset"),c("setPage",r["a"].authorization)),a.next=18;break;case 15:a.prev=15,a.t0=a["catch"](1),c("setPage",r["a"].authorization);case 18:case"end":return a.stop()}}),a,null,[[1,15]])})))()}},modules:{authorization:c["a"]}})}).call(this,n("b639").Buffer)},"4ec9":function(t,e,n){},"505c":function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var a=n("bee2"),o=n("d4ec"),r=Object(a["a"])((function t(){Object(o["a"])(this,t),this.authorization="Authorization",this.loading="Loading",this.registration="Registration",this.badSocial="BadSocialClubId"})),i=new r},"52d0":function(t,e,n){"use strict";n("f527")},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d"),n("99af");var a=n("7a23");function o(t,e,n,o,r,i){return Object(a["o"])(),Object(a["e"])(Object(a["s"])(t.page))}var r=n("5530"),i={class:"auth-auth flex_jc_ac fullscreen"},c={class:"auth-auth_toreg"};function s(t,e,n,o,r,s){var u=Object(a["r"])("AuthInput");return Object(a["o"])(),Object(a["f"])("div",i,[Object(a["g"])("form",{ref:"authform",class:"auth-auth_form",onSubmit:e[0]||(e[0]=Object(a["v"])((function(){return s.authorization&&s.authorization.apply(s,arguments)}),["prevent"]))},[Object(a["h"])(u,{value:s.loginInput,type:"text",name:"login"},null,8,["value"]),Object(a["h"])(u,{value:s.passwordInput,type:"password",name:"password"},null,8,["value"]),Object(a["h"])(u,{value:t.appKey,type:"hidden",name:"appKey"},null,8,["value"]),Object(a["g"])("button",null,Object(a["t"])(t.$t(r.loginButtonText)),1),Object(a["g"])("div",c,Object(a["t"])(t.$t(r.toRegButtonText)),1)],544)])}n("b0c0");var u={class:"auth_input"},l=["type","value","name"];function d(t,e,n,o,r,i){return Object(a["o"])(),Object(a["f"])("div",u,[Object(a["g"])("input",{type:n.type,value:n.value,name:n.name},null,8,l)])}var p={name:"App",props:{type:String,value:String,name:String},computed:{},data:function(){return{}},methods:{},components:{}},f=(n("647b"),n("6b0d")),h=n.n(f);const b=h()(p,[["render",d]]);var g=b,m=n("5502"),v={name:"App",props:{},computed:Object(r["a"])(Object(r["a"])(Object(r["a"])({},Object(m["d"])("authorization",["login","password"])),Object(m["d"])(["apiUrl","appKey"])),{},{loginInput:{get:function(){return this.login},set:function(t){this.setLogin(t)}},passwordInput:{get:function(){return this.password},set:function(t){this.setPassword(t)}}}),data:function(){return{loginButtonText:"auth.dologin",toRegButtonText:"auth.toregistration"}},methods:Object(r["a"])(Object(r["a"])(Object(r["a"])({},Object(m["c"])("authorization",["setLogin","setPassword"])),Object(m["b"])("authorization",["doAuthorization"])),{},{authorization:function(){this.doAuthorization(this.$refs.authform)}}),components:{AuthInput:g}};n("52d0");const O=h()(v,[["render",s]]);var w=O,j={class:"auth-loading flex_jc_ac fullscreen"},y={class:"auth-loading_text"};function k(t,e,n,o,r,i){return Object(a["o"])(),Object(a["f"])("div",j,[Object(a["g"])("div",y,Object(a["t"])(t.login)+" "+Object(a["t"])(r.textOut),1)])}n("38cf");var x={name:"App",props:{},computed:Object(r["a"])({},Object(m["d"])(["login"])),data:function(){return{textIn:"",textOut:"",cursorPosition:0,dotCount:5,interval:void 0,delay:150}},methods:{tick:function(){this.cursorPosition<this.textIn.length?this.cursorPosition++:this.cursorPosition=this.textIn.length-this.dotCount,this.textOut=this.textIn.substring(0,this.cursorPosition)}},components:{},mounted:function(){this.textIn=this.$t("auth.loading")+".".repeat(this.dotCount),this.interval=setInterval(this.tick,this.delay)},beforeUnmount:function(){clearInterval(this.interval)}};n("abe6");const P=h()(x,[["render",k]]);var S=P,A={class:"auth-badsocial fullscreen flex_jc_ac"},T={class:"auth-badsocial_body"};function I(t,e,n,o,r,i){return Object(a["o"])(),Object(a["f"])("div",A,[Object(a["g"])("div",T,Object(a["t"])(t.$t(r.text)),1)])}var z={name:"App",props:{},computed:{},data:function(){return{text:"auth.badsocial"}},methods:{},components:{}};n("740f");const _=h()(z,[["render",I]]);var C=_,E={name:"App",computed:Object(r["a"])({},Object(m["d"])(["page"])),data:function(){return{}},methods:Object(r["a"])(Object(r["a"])({},Object(m["b"])(["setToken","setAppKey"])),{},{dispatch:function(t,e){this.$store.dispatch(t,e)}}),components:{Authorization:w,Loading:S,BadSocialClubId:C},mounted:function(){window.dispatch=this.dispatch}};n("3a2c");const D=h()(E,[["render",o]]);var R=D,K=n("4360"),L=n("47e2"),B=(n("07ac"),n("d3b7"),n("159b"),{toregistration:{ru:"К регистрации",en:"To registration"},loading:{ru:"ты счастливчик",en:"you are lucky"},badsocial:{ru:"За этим аккаунтом закреплен другой SocialClub",en:"Another SocialClub is assigned to this account"},dologin:{ru:"Авторизироваться",en:"Authorization"}}),N=n("bee2"),U=n("d4ec"),$=Object(N["a"])((function t(){Object(U["a"])(this,t),this.ru="ru",this.en="en"})),F=new $,J={auth:B};function M(){var t={};t.locale=F.ru,t.fallbackLocale=F.en,t.messages={};var e=Object.values(F);return e.forEach((function(e){t.messages[e]=W(e)})),t}function W(t){var e={};for(var n in J){var a=J[n];for(var o in a){var r=a[o];e[n]={},r[t]?e[n][o]=r[t]:e[n][o]=r[0]}}return e}void 0==window.mp&&(window.mp={trigger:function(){window.console.log("Event name: ".concat(arguments.length<=0?void 0:arguments[0]));for(var t="",e=1;e<arguments.length;e++)t+="".concat(e<0||arguments.length<=e?void 0:arguments[e],",");window.console.log("Params: ".concat(t))},invoke:function(){window.console.log("Event name: ".concat(arguments.length<=0?void 0:arguments[0]));for(var t="",e=1;e<arguments.length;e++)t+="".concat(e<0||arguments.length<=e?void 0:arguments[e],",");window.console.log("Params: ".concat(t))}}),window.mp.triggerServer=function(){for(var t,e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];(t=window.mp).trigger.apply(t,["efwd"].concat(n))};var q=Object(L["a"])(M()),G=Object(a["d"])(R);G.use(q),G.use(K["a"]),G.mount("#app")},"5b7e":function(t,e,n){},"647b":function(t,e,n){"use strict";n("4ec9")},"740f":function(t,e,n){"use strict";n("866f")},8361:function(t,e,n){"use strict";var a=n("1da1"),o=(n("96cf"),n("d3b7"),n("bee2")),r=n("d4ec"),i=Object(o["a"])((function t(){Object(r["a"])(this,t),this.ok="ok",this.badPassword="badPassword",this.userNotFound="userNotFound",this.emailNotConfirmed="emailNotConfirmed",this.badApplication="badApplication",this.passwordConfirmError="passwordConfirmError",this.userAlredyExists="userAlredyExists",this.emailAlreadyExists="emailAlreadyExists",this.badEmailCode="badEmailCode",this.badEntryData="badEntryData",this.accessDined="accessDined"})),c=new i,s=n("505c");e["a"]={namespaced:!0,state:{password:"",login:"",authUrl:"https://auth.meta-lucky.ru/auth/login",spamProtection:0,spamDelay:1e3},mutations:{setLogin:function(t,e){t.login=e},setPassword:function(t,e){t.password=e},updateSpamProtection:function(t){t.spamProtection=Date.now()+t.spamDelay}},actions:{doAuthorization:function(t,e){return Object(a["a"])(regeneratorRuntime.mark((function n(){var a,o,r,i,u,l;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(a=t.state,o=t.dispatch,r=t.commit,n.prev=1,!(a.spamProtection>Date.now())){n.next=4;break}return n.abrupt("return");case 4:return r("updateSpamProtection"),i=new FormData(e),n.next=8,fetch(a.authUrl,{method:"POST",body:i});case 8:return u=n.sent,n.next=11,u.json();case 11:l=n.sent,n.t0=l.status,n.next=n.t0===c.ok?15:n.t0===c.userNotFound?17:19;break;case 15:return o("setPage",s["a"].loading,{root:!0}),n.abrupt("break",20);case 17:return o("setPage",s["a"].registration,{root:!0}),n.abrupt("break",20);case 19:return n.abrupt("break",20);case 20:n.next=25;break;case 22:n.prev=22,n.t1=n["catch"](1),console.log(n.t1);case 25:case"end":return n.stop()}}),n,null,[[1,22]])})))()}}}},"866f":function(t,e,n){},"9adc":function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var a=n("1da1"),o=(n("96cf"),n("d3b7"),500),r=50,i={};window.serverProcCallback=function(t,e){i[t]=e};var c=0;function s(t){return u.apply(this,arguments)}function u(){return u=Object(a["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t){var n=Date.now()+o,a=setInterval((function(){i[e]&&(t(i[e]),delete i[e],clearInterval(a)),n<Date.now()&&(t(void 0),clearInterval(a))}),r)})));case 1:case"end":return t.stop()}}),t)}))),u.apply(this,arguments)}function l(t){return d.apply(this,arguments)}function d(){return d=Object(a["a"])(regeneratorRuntime.mark((function t(e){var n,a,o,r,i,u=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:for(n=c++,a=u.length,o=new Array(a>1?a-1:0),r=1;r<a;r++)o[r-1]=u[r];return window.mp.trigger("common:server:proc:call",e,"auth:player:token:check",n,o),t.next=5,s(n);case 5:return i=t.sent,t.abrupt("return",i);case 7:case"end":return t.stop()}}),t)}))),d.apply(this,arguments)}},abe6:function(t,e,n){"use strict";n("5b7e")},f527:function(t,e,n){}});